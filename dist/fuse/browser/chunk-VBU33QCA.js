import{a as U}from"./chunk-CK6AD6XF.js";import{a as b}from"./chunk-6IEWE3OU.js";import{a as _}from"./chunk-IWGHEBIZ.js";import{a as R}from"./chunk-OFEOPKCC.js";import{a as N}from"./chunk-KQASFADC.js";import"./chunk-CHOSRW5W.js";import{c as I}from"./chunk-JND367CQ.js";import"./chunk-7U4JZNVG.js";import{C as z,F as A,J as B,b as T,i as j,p as V,s as G,w as k}from"./chunk-K2P4EKGI.js";import{$ as w,ja as O}from"./chunk-DARKUWJB.js";import"./chunk-EENLYY7H.js";import{a as $}from"./chunk-WGGS5SGH.js";import{d as D}from"./chunk-DJAHQBBJ.js";import{f as M,j as u,l as h,r as F}from"./chunk-NP3GUERB.js";import{$ as g,Cb as m,Db as d,Eb as f,Yb as l,Za as s,Zb as E,_a as y,dc as P,ea as p,ec as x,fa as a,ka as C,pb as S,q as c,rb as n}from"./chunk-32HXX3OB.js";import"./chunk-NEB6MB4Y.js";var H=(()=>{let o=class o{constructor(e,t){this._http=e,this.appSettings=t}getCobros(){return this._http.get(this.appSettings.cobroTrabajadores.url.base)}};o.\u0275fac=function(t){return new(t||o)(p(F),p($))},o.\u0275prov=g({token:o,factory:o.\u0275fac,providedIn:"root"});let i=o;return i})();function J(i,o){if(i&1&&(m(0,"mat-option",13),l(1),d()),i&2){let v=o.$implicit;n("value",v.id),s(),E(v.nombre)}}var L=(()=>{let o=class o{constructor(e){this._matDialog=e,this.datePipe=a(u),this.router=a(D),this.estadoDatosService=a(R),this.currencyPipe=a(h),this.cobroTrabadorService=a(H),this.estadoCreditosService=a(U),this.fb=a(z),this.estados=new G([""]),this.searchTerm="",this.estadpCreditos=[],this.data=[],this.columns=["Fecha cuota","Valor cuota","Valor pagado","Estado"],this.columnPropertyMap={"Fecha cuota":"fechaCobro","Valor cuota":"valorPendiente","Valor pagado":"valorPago",Estado:"nombreEstadoCredito"},this.buttons=[{label:"View",icon:"visibility",action:t=>{console.log("Editing",t),this.selectedData=t}}]}getEstadoCreditos(){this.subcription$=this.estadoCreditosService.getEstadoCobros().subscribe(e=>{this.estadpCreditos=e.data})}getCobros(){this.subcription$=this.cobroTrabadorService.getCobros().pipe(c(e=>(e.data.forEach(t=>{t.estado?t.estado=b.ACTIVO:t.estado=b.INACTIVO}),e)),c(e=>(e.data.forEach(t=>{t.fechaCobro=this.datePipe.transform(t.fechaCobro,"dd/MM/yyyy"),t.valorPendiente=this.currencyPipe.transform(t.valorPendiente,"USD","symbol","1.2-2"),t.valorPago=t.valorPago?this.currencyPipe.transform(t.valorPago,"USD","symbol","1.2-2"):"-"}),e))).subscribe(e=>{e?this.data=e.data:this.data=[]},e=>{this.data=[]})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(r=>{r&&this.getCobros()}),this.estados.valueChanges.subscribe(r=>{r&&console.log(r)})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getCobros(),this.getEstadoCreditos(),this.listenGrid()}};o.\u0275fac=function(t){return new(t||o)(y(I))},o.\u0275cmp=C({type:o,selectors:[["app-grid-cobros-empleados"]],standalone:!0,features:[P([u,h]),x],decls:16,vars:12,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0","w-1/2","gap-2.5"],[1,"fuse-mat-dense","rounded-lg","w-1/2",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],[1,"w-1/2"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons","searchTerm"],[3,"value"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2),l(3,"Cobro Trabajadores"),d(),m(4,"div",3)(5,"mat-form-field",4),f(6,"mat-icon",5)(7,"input",6),d(),m(8,"mat-form-field",7)(9,"mat-label"),l(10,"Estados"),d(),m(11,"mat-select",8),S(12,J,2,2,"mat-option",9),d()()()(),m(13,"div",10)(14,"div",11),f(15,"app-custom-table",12),d()()()),t&2&&(s(5),n("subscriptSizing","dynamic"),s(),n("svgIcon","heroicons_solid:magnifying-glass"),s(),n("autocomplete","off")("placeholder","Buscar"),s(4),n("formControl",r.estados),s(),n("ngForOf",r.estadpCreditos),s(3),n("columns",r.columns)("displayedColumns",r.columns)("columnPropertyMap",r.columnPropertyMap)("data",r.data)("buttons",r.buttons)("searchTerm",r.searchTerm))},dependencies:[_,j,O,B,T,w,N,M,A,V,k]});let i=o;return i})();var vt=[{path:"",component:L}];export{vt as default};
